<!DOCTYPE html>
<html lang="es">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;500;600;700;900&display=swap"
    rel="stylesheet"
  />

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ATBIM - Development Platform</title>
    <link rel="stylesheet" href="./css/_base.css" />
    <link rel="stylesheet" href="./css/index.css" />
    <!-- ✅ overlays/pantallas sin scroll -->
    <link rel="stylesheet" href="./css/panels.css" />

    <link rel="shortcut icon" href="./public/atbim.ico" />

    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <style>
      /* Digital Twin Flow Styles */
      .digital-twin-flow {
        width: 100%;
        padding: 3rem 0;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .flow-container {
        width: 100%;
        max-width: 1200px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 2rem;
        position: relative;
      }

      /* Animación de entrada */
      .circle,
      .digital-twin,
      .arrow-section {
        opacity: 0;
        transform: scale(0.8);
        animation: fadeInScale 0.8s ease-out forwards;
      }

      .circle:nth-child(1) {
        animation-delay: 0.2s;
      }
      .arrow-section:nth-child(2) {
        animation-delay: 0.5s;
      }
      .digital-twin {
        animation-delay: 0.8s;
      }
      .arrow-section:nth-child(4) {
        animation-delay: 1.1s;
      }
      .circle:nth-child(5) {
        animation-delay: 1.4s;
      }

      @keyframes fadeInScale {
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* Círculos */
      .flow-container .circle {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
        flex-shrink: 0;
      }

      .flow-container .circle h3 {
        font-size: 1.2rem;
        color: white;
        text-align: center;
        line-height: 1.3;
        font-weight: 600;
      }

      .flow-container .circle .subtitle {
        font-size: 0.65rem;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 0.4rem;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 500;
      }

      /* Physical World */
      .flow-container .physical {
        background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%);
        box-shadow: 0 8px 32px rgba(132, 204, 22, 0.25);
      }

      /* Digital Twin */
      .flow-container .digital-twin {
        width: 240px;
        height: 240px;
        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
        border-radius: 50%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-shadow: 0 8px 32px rgba(59, 130, 246, 0.3);
        position: relative;
        border: 2px solid rgba(129, 140, 248, 0.3);
      }

      .flow-container .digital-twin::before {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: inherit;
        background: linear-gradient(135deg, #818cf8, #ec4899, #2dd4bf);
        opacity: 0;
        animation: glowBorder 1.5s ease-out 0.8s forwards;
        z-index: -1;
      }

      @keyframes glowBorder {
        0% {
          opacity: 0;
        }
        50% {
          opacity: 0.6;
        }
        100% {
          opacity: 0;
        }
      }

      .flow-container .digital-twin-inner {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }

      .flow-container .digital-twin h3 {
        font-size: 1.4rem;
        color: white;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      .flow-container .actions {
        display: flex;
        flex-direction: column;
        gap: 0.3rem;
        font-size: 0.75rem;
        color: rgba(255, 255, 255, 0.8);
        font-weight: 500;
        letter-spacing: 1px;
      }

      /* Future World */
      .flow-container .future {
        background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        box-shadow: 0 8px 32px rgba(249, 115, 22, 0.25);
      }

      /* Arrows and Labels */
      .flow-container .arrow-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
        flex: 1;
        position: relative;
      }

      .flow-container .arrow-group {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .flow-container .arrow {
        width: 100%;
        height: 2px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(148, 163, 184, 0.4),
          rgba(148, 163, 184, 0.4),
          transparent
        );
        position: relative;
      }

      .flow-container .arrow::after {
        content: "";
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 0;
        height: 0;
        border-left: 8px solid rgba(148, 163, 184, 0.6);
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
      }

      .flow-container .arrow-reverse::after {
        left: 0;
        right: auto;
        border-left: none;
        border-right: 8px solid rgba(148, 163, 184, 0.6);
      }

      .flow-container .label {
        padding: 0.4rem 1.2rem;
        background: rgba(15, 23, 42, 0.8);
        border-radius: 20px;
        font-size: 0.65rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        border: 1px solid;
        white-space: nowrap;
      }

      .flow-container .label-green {
        color: #84cc16;
        border-color: rgba(132, 204, 22, 0.4);
      }

      .flow-container .label-orange {
        color: #f97316;
        border-color: rgba(249, 115, 22, 0.4);
      }

      /* Animación de líneas dibujándose */
      .flow-container .arrow::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(129, 140, 248, 0.6)
        );
        animation: drawLine 0.6s ease-out forwards;
      }

      .flow-container .arrow-section:nth-child(2) .arrow::before {
        animation-delay: 0.5s;
      }

      .flow-container .arrow-section:nth-child(4) .arrow::before {
        animation-delay: 1.1s;
      }

      @keyframes drawLine {
        to {
          width: 100%;
        }
      }

      /* Responsive */
      @media (max-width: 900px) {
        .flow-container {
          flex-direction: column;
          gap: 2rem;
        }

        .flow-container .arrow-section {
          transform: rotate(90deg);
          width: 120px;
          gap: 1rem;
        }

        .flow-container .digital-twin {
          width: 200px;
          height: 200px;
        }

        .flow-container .circle {
          width: 160px;
          height: 160px;
        }
      }
    </style>
  </head>

  <body>
    <header class="header">
      <nav class="nav-container">
        <div class="logo">
          <img
            src="./resources/images/atbimName.png"
            width="180"
            alt="ATBIM Logo"
          />
        </div>

        <ul class="nav-menu">
          <li><a href="#technology" id="nav-technology">Technology</a></li>
          <li><a href="#solutions" id="nav-solutions">Solutions</a></li>
          <li><a href="#resources" id="nav-resources">Resources</a></li>
          <li><a href="#about" id="nav-about">About Us</a></li>
        </ul>

        <div class="language-selector">
          <button class="lang-btn active" data-lang="es" aria-label="Español">
            <span class="flag flag-es"></span>
          </button>

          <button class="lang-btn" data-lang="en" aria-label="English">
            <span class="flag flag-en"></span>
          </button>
        </div>

        <!-- ✅ Contact abre panel (no scroll) -->
        <a
          href="#contact"
          class="btn-contact"
          id="nav-contact-btn"
          data-open-panel="contact"
        >
          Contact Us <span class="arrow">→</span>
        </a>
      </nav>
    </header>

    <!-- HERO -->
    <section class="hero" data-panel="hero">
      <div class="hero-content">
        <div>
          <h1 class="hero-title" id="hero-title">BI</h1>
          <h2 class="hero-subtitle" id="hero-subtitle">
            Agilizamos tu flujo de trabajo BIM con plugins y soluciones web a
            medida.
          </h2>
        </div>
        <article>
          <!-- ✅ abre Technology panel (sin scroll) -->
          <button class="btn-primary" id="hero-cta" data-open-panel="technology">
            Explore our Tech <span class="arrow">→</span>
          </button>
        </article>
      </div>
    </section>

    <!-- SERVICIOS -->
    <section class="atbim-panel" data-panel="services" id="solutions">
      <div class="atbim-panel-inner">
        <h2 class="section-title" id="services-title">
          Nuestros <span class="highlight">Servicios</span>
        </h2>
        <p class="section-subtitle" id="services-subtitle">
          Especializados en soluciones tecnológicas para el sector AEC,
          desarrollamos herramientas que optimizan tu flujo de trabajo.
        </p>

        <div class="cards-grid">
          <div class="card">
            <div class="card-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"
                ></path>
                <polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline>
                <polyline points="7.5 19.79 7.5 14.6 3 12"></polyline>
                <polyline points="21 12 16.5 14.6 16.5 19.79"></polyline>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
              </svg>
            </div>
            <div class="card-badge" id="services-card1-badge">Plugins Revit</div>
            <p class="card-text" id="services-card1-text">
              Desarrollamos plugins personalizados para Autodesk Revit que
              automatizan tareas repetitivas y optimizan tu flujo de trabajo BIM
              con inteligencia artificial.
            </p>
          </div>

          <div class="card">
            <div class="card-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                <line x1="8" y1="21" x2="16" y2="21"></line>
                <line x1="12" y1="17" x2="12" y2="21"></line>
              </svg>
            </div>
            <div class="card-badge" id="services-card2-badge">
              Aplicaciones Web
            </div>
            <p class="card-text" id="services-card2-text">
              Creamos aplicaciones web modernas y escalables para la gestión de
              proyectos de construcción, visualización de modelos BIM y
              colaboración en tiempo real.
            </p>
          </div>

          <div class="card">
            <div class="card-icon">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M12 16v-4"></path>
                <path d="M12 8h.01"></path>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
              </svg>
            </div>
            <div class="card-badge" id="services-card3-badge">Integración IA</div>
            <p class="card-text" id="services-card3-text">
              Integramos modelos de lenguaje avanzados (IA) en tus herramientas
              BIM para interpretar comandos en lenguaje natural y ejecutar
              acciones automáticas.
            </p>
          </div>
        </div>

        <p class="section-footer" id="services-footer">
          Transformamos ideas en <strong>soluciones tecnológicas</strong> que
          impulsan la innovación en el sector de la construcción.
        </p>
      </div>
    </section>

    <!-- TECHNOLOGY -->
    <section class="atbim-panel" data-panel="technology" id="technology">
      <div class="atbim-panel-inner">
        <h2 class="section-title" id="commands-title">
          Del comando a la <span class="highlight">acción</span>
        </h2>
        <p class="section-subtitle" id="commands-subtitle">
          Nuestros plugins integran modelos de lenguaje (IA) directamente en
          Revit, interpretando instrucciones en texto o voz:
        </p>

        <div class="digital-twin-flow">
          <div class="flow-container">
            <div class="circle physical">
              <h3>Physical<br />World</h3>
              <span class="subtitle">TODAY</span>
            </div>

            <div class="arrow-section">
              <div class="arrow-group">
                <div class="label label-green">DATA CAPTURE</div>
                <div class="arrow"></div>
              </div>
              <div class="arrow-group">
                <div class="arrow arrow-reverse"></div>
                <div class="label label-green">CHANGE</div>
              </div>
            </div>

            <div class="digital-twin">
              <div class="digital-twin-inner">
                <h3>Digital Twin</h3>
                <div class="actions">
                  <div>DESCRIBE</div>
                  <div>DECIDE</div>
                </div>
              </div>
            </div>

            <div class="arrow-section">
              <div class="arrow-group">
                <div class="label label-orange">PREDICT</div>
                <div class="arrow"></div>
              </div>
              <div class="arrow-group">
                <div class="arrow arrow-reverse"></div>
                <div class="label label-orange">PRESCRIBE</div>
              </div>
            </div>

            <div class="circle future">
              <h3>Future<br />Physical World</h3>
              <span class="subtitle">FUTURE</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- RESOURCES -->
    <section class="atbim-panel" data-panel="resources" id="resources">
      <div class="atbim-panel-inner bim-with-ia-content">
        <div class="bim-with-ia-left">
          <h2 id="integration-title">
            <span>I</span><span>n</span><span>t</span><span>e</span><span>g</span
            ><span>r</span><span>a</span><span>c</span><span>i</span><span>ó</span
            ><span>n</span>
            &nbsp;
            <span>d</span><span>e</span>
            &nbsp;
            <span>I</span><span>n</span><span>t</span><span>e</span><span>l</span
            ><span>i</span><span>g</span><span>e</span><span>n</span><span>c</span
            ><span>i</span><span>a</span>
            &nbsp;
            <span>A</span><span>r</span><span>t</span><span>i</span><span>f</span
            ><span>i</span><span>c</span><span>i</span><span>a</span>
            &nbsp;
            <span>e</span><span>n</span>
            &nbsp;
            <span>R</span><span>e</span><span>v</span><span>i</span><span>t</span>
          </h2>

          <p id="integration-paragraph">
            Aprovechamos la potencia de la IA para optimizar procesos dentro de
            Revit, implementando soluciones inteligentes a través de plugins
            personalizados. Esto permite automatizar tareas, mejorar la
            precisión del modelado y potenciar la productividad de tu equipo.
          </p>

          <ul>
            <li id="integration-li1">
              Detección automática de conflictos y errores en modelos BIM.
            </li>
            <li id="integration-li2">
              Generación inteligente de planos y documentación.
            </li>
            <li id="integration-li3">
              Asistentes de diseño basados en IA para optimización de espacios.
            </li>
          </ul>
        </div>

        <div class="bim-with-ia-right">
          <div class="illustration">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-brain-circuit-icon lucide-brain-circuit"
            >
              <path
                d="M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"
              />
              <path d="M9 13a4.5 4.5 0 0 0 3-4" />
              <path d="M6.003 5.125A3 3 0 0 0 6.401 6.5" />
              <path d="M3.477 10.896a4 4 0 0 1 .585-.396" />
              <path d="M6 18a4 4 0 0 1-1.967-.516" />
              <path d="M12 13h4" />
              <path d="M12 18h6a2 2 0 0 1 2 2v1" />
              <path d="M12 8h8" />
              <path d="M16 8V5a2 2 0 0 1 2-2" />
              <circle cx="16" cy="13" r=".5" />
              <circle cx="18" cy="3" r=".5" />
              <circle cx="20" cy="21" r=".5" />
              <circle cx="20" cy="8" r=".5" />
            </svg>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT (NUEVO diseño tipo "equipo") -->
    <section class="atbim-panel" data-panel="about" id="about">
      <div class="atbim-panel-inner">
        <section class="about-hero">
          <div class="about-banner">
            <div class="about-banner-overlay"></div>
            <div class="about-banner-inner">
              <div class="about-brand">
                <span class="about-kicker" id="about-kicker">Equipo</span>
                <h2 class="about-title" id="about-title">
                  Quiénes somos | Equipo ATBIM
                </h2>
                <p class="about-subtitle" id="about-subtitle">
                  Realizamos consultoría BIM con altas exigencias. Trabajamos en
                  equipo con el objetivo de optimizar y automatizar los procesos
                  de construcción.
                </p>

                <!-- ✅ CTA: cierra about y abre contacto -->
                <a
                  class="about-cta"
                  href="#contact"
                  data-open-panel="contact"
                  id="about-cta"
                >
                  Forma parte de nuestro equipo <span class="arrow">→</span>
                </a>
              </div>
            </div>
          </div>

          <div class="about-grid">
            <div class="about-card">
              <h3 class="about-card-title">Reconocimientos y trayectoria</h3>
              <ul class="about-list">
                <li>Fundadores del grupo BIM Aragón - 2015</li>
                <li>Miembros Building Smart Spanish Chapter - 2017</li>
                <li>ADN (Autodesk Development Network) - 2017</li>
                <li>Finalistas concurso IDEA (AREX Aragón Exterior) - 2018</li>
                <li>Team 4.0 Digital Hackathon (Built Europe) - 2018</li>
                <li>Dirección del Máster BIM USJ - Desde 2018</li>
              </ul>
            </div>

            <div class="about-card">
              <h3 class="about-card-title">Publicaciones y ponencias</h3>
              <ul class="about-list">
                <li>Ponentes en Jornada BIM CIVIL UEM - 2016</li>
                <li>Publicación Revista Cimbra - 2017</li>
                <li>Publicación libro Abstracts Contart - 2018</li>
                <li>Revista Building Smart Spanish Chapter - 2018</li>
                <li>Ponentes congreso XXXVI Zaragoza</li>
                <li>Ponentes BIMTour 2018-2019</li>
              </ul>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- CONTACTO (panel overlay, sin scroll página) -->
    <section class="atbim-panel" data-panel="contact" id="contact">
      <div class="atbim-panel-inner">
        <section class="contact-section">
          <div class="contact-container">
            <div class="contact-info">
              <div class="contact-info-card">
                <div>
                  <h2 id="contact-main-title">Hablemos</h2>
                  <p id="contact-main-text">
                    Si tienes dudas o quieres más información sobre nuestros
                    servicios, no dudes en enviarnos un mensaje. ¡Estamos para
                    ayudarte!
                  </p>
                </div>
              </div>

              <div class="contact-info-card">
                <span><!-- svg phone --></span>
                <a href="tel:+34660514455">+34 660 51 44 55</a>
              </div>

              <div class="contact-info-card">
                <span><!-- svg mail --></span>
                <a href="mailto:info@atbim.es">info@atbim.es</a>
              </div>

              <div class="contact-info-card">
                <span><!-- svg map --></span>
                Avenida Ranillas 3C, 1º, Oficina B, 50018, Zaragoza
              </div>
            </div>

            <div class="contact-form">
              <h2 id="contact-form-title">Contáctanos</h2>
              <form action="/send-message" method="POST">
                <div>
                  <label for="name" id="contact-name-label">Nombre:</label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    placeholder="Tu nombre"
                    required
                  />
                </div>

                <div>
                  <label for="email" id="contact-email-label"
                    >Correo electrónico:</label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    placeholder="Tu correo"
                    required
                  />
                </div>

                <div>
                  <label for="message" id="contact-message-label">Mensaje:</label>
                  <textarea
                    id="message"
                    name="message"
                    placeholder="Escribe tu mensaje aquí..."
                    required
                  ></textarea>
                </div>

                <button type="submit" id="contact-submit-btn">Enviar</button>
              </form>
            </div>
          </div>
        </section>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-container">
        <p id="footer-text">&copy; ATBIM - Building Engineering.</p>
      </div>
    </footer>

    <script type="module" src="./js/index.js"></script>

    <!-- Canvas 3D -->
    <div id="scene-container"></div>

    <!-- ✅ Router de panels SIN SCROLL (no toca tu Three.js) -->
    <script>
      (function () {
        const body = document.body;
        const panels = Array.from(document.querySelectorAll(".atbim-panel"));

        function openPanel(name) {
          panels.forEach((p) => p.classList.remove("is-active"));
          const el = document.querySelector(`.atbim-panel[data-panel="${name}"]`);
          if (el) {
            el.classList.add("is-active");
            body.classList.add("panel-open");
            body.classList.add("hero-is-hidden");
          }
        }

        // ✅ No scroll en la página
        body.style.overflow = "hidden";

        // A) click en cualquier cosa con data-open-panel
        document.addEventListener("click", (e) => {
          const el = e.target.closest("[data-open-panel]");
          if (!el) return;
          e.preventDefault();
          openPanel(el.getAttribute("data-open-panel"));
        });

        // B) nav links #technology/#solutions/#resources/#about => abren panel (sin scroll)
        document.addEventListener("click", (e) => {
          const a = e.target.closest('a[href^="#"]');
          if (!a) return;

          const hash = a.getAttribute("href");
          if (!hash || hash === "#") return;

          const name = hash.replace("#", "");
          const isPanel = document.querySelector(
            `.atbim-panel[data-panel="${name}"]`
          );

          if (isPanel && !a.hasAttribute("data-open-panel")) {
            e.preventDefault();
            openPanel(name);
          }
        });

        // C) ESC cierra (vuelve a hero)
        document.addEventListener("keydown", (e) => {
          if (e.key !== "Escape") return;
          panels.forEach((p) => p.classList.remove("is-active"));
          body.classList.remove("panel-open");
          body.classList.remove("hero-is-hidden");
        });
      })();
    </script>
  </body>
</html>


//button de volver tiene que estar en idoma, nuevo apartado en ingles tambien, buttons de hotpots en ingles tammbien y apartado de solucuiones